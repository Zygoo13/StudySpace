<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Bước 2 - Chọn phòng & bàn</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">

    <h2 class="mb-3 text-primary">Đặt chỗ học - Bước 2: Chọn không gian</h2>

    <div class="card p-3 shadow-sm mb-4">
        <p class="mb-1">Ngày: <strong th:text="${request.date}"></strong></p>
        <p class="mb-1">Giờ bắt đầu: <strong th:text="${request.startTime}"></strong></p>
        <p class="mb-1">Combo: <strong th:text="${combo.comboName}"></strong></p>
        <p class="mb-1">Giờ kết thúc: <strong th:text="${#temporals.format(end,'HH:mm dd/MM/yyyy')}"></strong></p>
        <p class="mb-1">Số người: <strong th:text="${request.peopleCount}"></strong></p>
    </div>

    <form action="/booking/customer" method="post" class="card p-4 shadow-sm">

        <input type="hidden" name="date" th:value="${request.date}">
        <input type="hidden" name="startTime" th:value="${request.startTime}">
        <input type="hidden" name="comboId" th:value="${request.comboId}">
        <input type="hidden" name="peopleCount" th:value="${request.peopleCount}">

        <h4 class="mb-3">Chọn phòng và các bàn</h4>

        <div th:each="floor : ${floors}" class="mb-4">
            <h5 class="text-success" th:text="'Tầng: ' + ${floor.floorName}"></h5>

            <div th:each="roomDeskEntry : ${availableMap[floor.floorId]}" class="ms-3">

                <h6 class="mt-3" th:text="'Phòng: ' + ${roomDeskEntry.key}"></h6>

                <ul class="list-group mb-3">
                    <li class="list-group-item"
                        th:each="desk : ${roomDeskEntry.value}">
                        <label class="form-check-label">
                            <input type="checkbox" class="form-check-input me-2"
                                   name="deskIds"
                                   th:value="${desk.deskId}">
                            <strong th:text="${desk.deskName}"></strong>
                            – <span th:text="${desk.capacity}"></span> ghế
                        </label>
                    </li>
                </ul>

            </div>
        </div>

        <button type="submit" class="btn btn-primary w-100">Tiếp tục</button>

    </form>

</div>

</body>
</html>
